# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ2  
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞: 
```bash
lab2/
‚îú‚îÄ‚îÄ tasks/
‚îÇ   ‚îî‚îÄ‚îÄ main.yml                # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å –∑–∞–¥–∞—á–∞–º–∏ –¥–ª—è –ø–ª–µ–π–±—É–∫–æ–≤
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ Caddyfile.j2            # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Caddy
‚îú‚îÄ‚îÄ caddy_deploy.yml            # –û—Å–Ω–æ–≤–Ω–æ–π –ü–ª–µ–π–±—É–∫ –¥–ª—è Caddy
‚îú‚îÄ‚îÄ task1.yml                   # –û—Å–Ω–æ–≤–Ω–æ–π –ü–ª–µ–π–±—É–∫ –¥–ª—è –∑–∞–¥–∞–Ω–∏—è 1
‚îú‚îÄ‚îÄ task1-1.yml                 # –ü–ª–µ–π–±—É–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è txt
‚îú‚îÄ‚îÄ task1-2.yml                 # –ü–ª–µ–π–±—É–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è txt
‚îú‚îÄ‚îÄ photos/                     # –°–∫—Ä–∏–Ω—à–æ—Ç—ã
README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ß–∞—Å—Ç—å ‚Ññ1 - –•–æ–¥ —Ä–∞–±–æ—Ç—ã:  

### 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å Ansible –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ ‚Äúlocalhost‚Äù  
![](photos/main1.png)  

---

### 2. –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º, —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å shell 
![](photos/main2.png)   
![](photos/main3.png)  

---


### 3. –£–¥–∞–ª—è–µ–º —Ñ–∞–π–ª —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å file:
![](photos/main4.png)

---
### 4. –ó–∞–ø—É—Å–∫–∞–µ–º –ø–ª–µ–π–±—É–∫  
–í—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É:  
```bash
ansible-playbook caddy_deploy.yml
```
![](photos/main5.png)

---
### 5. –°–æ–∑–¥–∞—ë–º –Ω–∞ duckdns.org –¥–æ–º–µ–Ω –∏ –ø–æ–¥–∫–ª—é—á–∞–µ–º –∞–¥—Ä–µ—Å—Å, –ø–æ—Å–ª–µ —á–µ–≥–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Caddyfile.j2 –∏ main.yml
![](photos/main7.png)
![](photos/main6.png)
![](photos/main8.png)

## –ß–∞—Å—Ç—å ‚Ññ2 - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π: 

### –ó–∞–¥–∞–Ω–∏–µ 1: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø—Ä–∏–º–µ—Ä —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏ —É–¥–∞–ª–µ–Ω–∏–µ–º —Ñ–∞–π–ª–∞ –∏–∑ —à–∞–≥–∞ 5 –ß–∞—Å—Ç–∏ 1 —Å ad-hoc –∫–æ–º–∞–Ω–¥ –Ω–∞ –ø–ª–µ–π–±—É–∫ —Ñ–æ—Ä–º–∞—Ç, –∞ —Ç–∞–∫ –∂–µ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ç–≤–µ—Ä—Ç—ã–π —à–∞–≥ - –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –ø–æ–º–µ–Ω—è—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –Ω–∞ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ. 

–°–æ–∑–¥–∞–ª–∏ –ø–ª–µ–π–±—É–∫ `task1.yml` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏. –ó–∞–ø–∏—Ö–∞–ª–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–¥–µ–ª–∏–ª —Ñ–∞–π–ª –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏:
- `task1-1.yml` - –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
- `task1-2.yml` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∏ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

–ü—Ä–∏–º–µ—Ä –°–æ–∑–¥–∞–Ω–∏—è txt —Ñ–∞–π–ª–∞ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `task1-1.yml`:

![](photos/task1-1.png)

–ü—Ä–∏–º–µ—Ä –ü—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è txt –∏ –ò–∑–º–µ–Ω–µ–Ω–∏—è –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `task1-2.yml`:

![](photos/task1-2.png)

–ü—Ä–∏–º–µ—Ä –£–¥–∞–ª–µ–Ω–∏—è txt —Ñ–∞–π–ª–∞ –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã –æ—Å–Ω–æ–≤–Ω–æ–≥–æ `task1.yml`:

![](photos/task1-3.png)

### –ó–∞–¥–∞–Ω–∏–µ 2: ‚Äú–†–∞—Å—à–∏—Ä–∏—Ç—å‚Äù –∫–æ–Ω—Ñ–∏–≥ –≤–µ–±—Å–µ—Ä–≤–µ—Ä–∞ Caddy –ª—é–±—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –ø–æ –∂–µ–ª–∞–Ω–∏—é: –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏–ª–∏ –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ (header). –í–º–µ—Å—Ç–æ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã Caddy –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ—é, —Ö–æ—Ç—è –±—ã index.html —Å Hello world –≤–Ω—É—Ç—Ä–∏. –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —à–∞–≥–∞ –≤ tasks.

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Caddy `templates/Caddyfile.j2`:
```
:80 {
root * /var/www/html
    file_server

    log {
        output file /var/log/caddy/access.log
        format json
        level {{ log.level }}
    }

    header / {
        X-Custom-Header "LR2"
    }
}
```

#### –î–æ–±–∞–≤–∏–ª–∏ 2 –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ `tasks/main.yml`:

- –¥–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É

```yaml
- name: Create custom index.html
  copy:
    content: |
      <html>
      <head>
        <title>LR2</title>
      </head>
      <body>
        <h1>HELLO FROM WEB_HOLDERS</h1>
        <img src="rickroll.gif" alt="rickroll.gif">
      </body>
      </html>
    dest: /var/www/html/index.html
```

- –ø–æ–¥–≥—Ä—É–∂–∞–µ–º gif rickroll, —á—Ç–æ–±—ã –∑–∞—Ä–∏–∫—Ä–æ–ª–ª–∏—Ç—å –≤–∞—Å üòâ

```yaml
- name: Upload rickroll.gif to local server
  copy:
    src: ./templates/rickroll.gif
    dest: /var/www/html/rickroll.gif
```

- –ü–æ–ª—É—á–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

![](photos/task2-1.png)

- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å

![](photos/task2-2.png)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—Å–µ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ. –ù–∞—Å—Ç—Ä–æ–µ–Ω –≤–µ–±-—Å–µ—Ä–≤–µ—Ä Caddy —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ç–∞—Ä—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π. –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –ø–ª–µ–π–±—É–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á.

_–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω —Å—Ç—É–¥–µ–Ω—Ç–æ–º –∫–æ–º–∞–Ω–¥—ã Web_holders_

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–¥–∞–Ω–∏—è–º:  

1. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ –º–∞–∫–±—É–∫–µ:**  
   –Ø –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç—ã –≤—ã–ø–æ–ª–Ω—è–ª–∏ –∑–∞–¥–∞—á–∏ –Ω–∞ mac os, –°–∏—Å—Ç–µ–º–∞ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–≥—Ä—É–∑–∏—Ç—å –º–æ–¥—É–ª–∏ –Ω–µ –Ω–∞ Debian —Å–∏—Å—Ç–µ–º—É.

2. **–ú–æ–¥—É–ª–∏:**  
   –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥—É–ª–∏ –≤ —Ñ–∞–π–ª–µ `tasks/main.yml` —Ç—Ä–µ–±—É—é—Ç root –ø—Ä–∞–≤, —á—Ç–æ —Ä–µ—à–∏–ª –ø—É—Ç–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ `caddy_deploy.yml`
   ```yaml
   become: yes
   ```

3. **–ü–æ–π–¥—É —Ç—Ä–æ–≥–∞—Ç—å —Ç—Ä–∞–≤—É ü™¥**

